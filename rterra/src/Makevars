UNAME := $(shell uname)
ifeq ($(UNAME), Linux)
DYNFLAGS = -Wl,-rpath=${R_PACKAGE_DIR}/libs -Wl,-rpath=./ -L. -shared -fPIC 
else
DYNFLAGS = -Wl,-rpath -Wl,${R_PACKAGE_DIR}/libs -Wl,-rpath -Wl,./  -dynamiclib  -fPIC -L. 
endif

rlib: rterra.cc
	g++ -O2 -fPIC -c -o rterra.o rterra.cc `R CMD config --cppflags`  -I.
	g++ -O2  $(DYNFLAGS) rterra.o  libluajit.a  -lterra  -o rterra.so  `R CMD config --ldflags`  

